<div class="card">
    <div class="card-image">
        <figure class="image is-4by3" [ngClass]="{'is-hidden': !isImageLoaded}">
            <a (click)=toggleImageModal()>
                <img (loaded)="removeSpinner()" 
                src="{{imageData.downloadURL}}" alt="Placeholder image" id="{{imageData.customID}}">
            </a>
        </figure>
        <div *ngIf="!isImageLoaded" class="container has-text-centered">
            <app-spinner></app-spinner>
        </div>
    </div>
    <div class="card-content">
        <div class="columns is-vcentered">
            <div class="column is-two-thirds">
                <strong>Album: </strong>{{imageData.album}}
                <br>
                <strong>Date: </strong>{{imageData.uploadDate | date}}
            </div>
            <div class="column">
                <button class="button is-fullwidth" (click)="downloadImage()">
                    <span class="icon is-small">
                        <i class="fas fa-download"></i>
                    </span>
                </button>
            </div>
            <div *ngIf="showDeleteButton" class="column">
                <button class="button is-danger is-fullwidth" (click)="toggleDeleteModal()">Delete</button>
            </div>
        </div>
    </div>
</div>
<ng-template [ngIf]="showImageModal">
    <div class="modal is-active">
        <div class="modal-background" (click)=toggleImageModal()></div>
        <div class="modal-content">
          <p class="image">
            <img src="{{imageData.downloadURL}}">
          </p>
        </div>
        <button class="modal-close is-large" aria-label="close" (click)=toggleImageModal()></button>
    </div>
</ng-template>
<ng-template [ngIf]="showDeleteModal">
    <div class="modal is-active" *ngIf="showDeleteModal">
        <div class="modal-background" (click)=toggleDeleteModal()></div>
        <div class="modal-content">
            <div class="box">
                <p>Are you sure you want to delete this image?</p>
                <button class="button is-danger is-fullwidth" (click)="deleteImage()">Delete</button>
            </div>
        </div>
        <button class="modal-close is-large" aria-label="close" (click)=toggleDeleteModal()></button>
    </div>
</ng-template>
<ng-template #loading>

</ng-template>
